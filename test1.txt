# CodeTracker 프로젝트 개요

## 프로젝트 정보
- 프로젝트명: CodeTracker
- 버전: v3.0
- 목적: AI 코딩을 위한 자동 버전 관리 시스템

## 핵심 기능

### 1. 자동 버전 추적
- Claude Code와 완벽하게 통합되어 모든 AI 작업을 자동으로 추적
- 프롬프트 입력 전후로 스냅샷 자동 생성
- 코드 변경 사항을 실시간으로 감지 및 기록

### 2. 아키텍처
CodeTracker는 두 가지 주요 컴포넌트로 구성:

#### A. Claude Code Hooks (.claude/hooks/)
- user_prompt_submit.js: 프롬프트 전 실행, pre-prompt 스냅샷 생성
- stop.js: Claude 작업 완료 후 실행, post-prompt 스냅샷 및 상호작용 기록
- Node.js 기반으로 크로스 플랫폼 지원 (Windows/macOS/Linux)
- 모든 파일 스캐닝, 변경 감지, 서버 통신을 훅에서 처리

#### B. 설정 파일 (.codetracker/)
- config.json: 프로젝트 설정 (무시 패턴, 추적 확장자, 서버 URL)
- credentials.json: 사용자 인증 (API 키, 프로젝트 ID)
- cache/: 스냅샷 상태 및 세션 추적을 위한 임시 파일

### 3. 데이터 플로우
```
사용자 프롬프트 입력
  → UserPromptSubmit 훅 실행
    → Pre-prompt 스냅샷 생성
      → 파일 스캔, 변경 감지
        → 서버로 전송, snapshot_id 획득
          → 세션 정보 저장

Claude Code가 파일 수정

사용자가 Claude 중지 (Ctrl+C 또는 완료)
  → Stop 훅 실행
    → Post-prompt 스냅샷 생성
      → 파일 재스캔, 새 변경 감지
        → 서버로 전송
          → 상호작용 기록 (소요 시간, 통계)
            → 세션 파일 정리
```

### 4. 변경 감지 알고리즘
- 해시 기반 스냅샷 시스템 사용
- SHA256 해시로 파일 변경 감지
- last_snapshot.json과 비교하여 추가/수정/삭제 파일 식별
- 변경된 파일 내용만 서버로 전송 (효율적인 대역폭 사용)
- 서버에서 해시 기반 파일 버전 중복 제거

### 5. 주요 특징
- 완전 자동화: 수동 명령 불필요
- 비간섭적: 훅 실패 시에도 Claude Code 정상 작동 보장
- 크로스 플랫폼: Node.js 기반으로 모든 OS 지원
- 경량: 내장 모듈만 사용 (fs, path, crypto)
- 보안: API 키 인증, 사용자별 데이터 격리

## 기술 스택
- 언어: Node.js (훅 시스템)
- 인증: API 키 기반
- 변경 감지: SHA256 해싱
- 통합: Claude Code Hooks

## 설치 요구사항
- Node.js 18.0.0 이상
- Claude Code CLI
- CodeTracker 서버 (별도 실행)

## 보안 고려사항
- credentials.json은 반드시 .gitignore에 추가
- Unix 시스템에서는 chmod 600으로 권한 설정
- 모든 API 요청에 X-API-Key 헤더 필요
- 사용자별 데이터 완전 격리

## 프로젝트 구조
```
your-project/
├── .codetracker/              # CodeTracker 데이터
│   ├── config.json            # 설정
│   ├── credentials.json       # API 키 (git ignore!)
│   └── cache/
│       ├── last_snapshot.json
│       └── current_session.json
│
├── .claude/                   # Claude Code 훅
│   ├── settings.json          # 훅 설정
│   └── hooks/
│       ├── user_prompt_submit.js  # 프롬프트 전
│       └── stop.js                # 프롬프트 후
│
└── 소스 파일...
```

## 로드맵 (v3.1)
- Web UI 대시보드
- 실시간 파일 워칭
- VS Code 확장
- LLM 기반 AI 활용 역량 분석

## 라이선스
MIT License

## 연락처
- 이메일: contact@thinktrace.net
- GitHub: Issues 페이지 활용
